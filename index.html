<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal Berita Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6 font-sans">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-4xl font-bold text-center mb-6">Portal Berita</h1><!-- Login Admin -->
<button id="loginBtn" class="px-4 py-2 bg-blue-600 text-white rounded-xl mb-4">Login Admin</button>

<!-- Form Admin -->
<div id="adminForm" class="hidden bg-white p-4 rounded-2xl shadow mb-8">
  <h2 class="text-xl font-semibold mb-3">Tambah Berita</h2>
  <input id="judul" class="w-full p-2 mb-2 border rounded-xl" placeholder="Judul Berita" />
  <textarea id="konten" class="w-full p-2 mb-2 border rounded-xl" placeholder="Konten" rows="4"></textarea>
  <button id="publishBtn" class="px-4 py-2 bg-green-600 text-white rounded-xl">Publikasikan</button>
</div>

<!-- Daftar Berita -->
<div id="listBerita" class="space-y-4"></div>

  </div>  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyBab2pklCIaeEkqg8pqQpUUQ02r4ZJZfyk",
      authDomain: "web-berita-tbj.firebaseapp.com",
      projectId: "web-berita-tbj",
      storageBucket: "web-berita-tbj.firebasestorage.app",
      messagingSenderId: "111379599206",
      appId: "1:111379599206:web:4f84659df23dcc7d1bc2a7"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let isAdmin = false;

    const loginBtn = document.getElementById("loginBtn");
    const adminForm = document.getElementById("adminForm");
    const publishBtn = document.getElementById("publishBtn");
    const listBerita = document.getElementById("listBerita");

    loginBtn.onclick = () => {
      isAdmin = true;
      adminForm.classList.remove("hidden");
      loginBtn.classList.add("hidden");
    };

    // Tambah Berita
    publishBtn.onclick = async () => {
      const judul = document.getElementById("judul").value;
      const konten = document.getElementById("konten").value;
      if (!judul.trim() || !konten.trim()) return;

      await db.collection("berita").add({
        judul,
        konten,
        tanggal: Date.now()
      });

      document.getElementById("judul").value = "";
      document.getElementById("konten").value = "";
    };

    // Load Berita
    db.collection("berita").orderBy("tanggal", "desc").onSnapshot((snap) => {
      listBerita.innerHTML = "";

      snap.forEach((doc) => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "bg-white p-4 rounded-2xl shadow";

        div.innerHTML = `
          <h3 class="text-2xl font-bold">${data.judul}</h3>
          <p class="mt-2 text-gray-700">${data.konten}</p>
          <p class="text-sm text-gray-500 mt-1">${new Date(data.tanggal).toLocaleString()}</p>
          ${isAdmin ? `<button data-id="${doc.id}" class="hapus px-3 py-1 bg-red-600 text-white rounded-xl mt-3">Hapus</button>` : ""}
        `;

        listBerita.appendChild(div);
      });

      // Tombol hapus
      document.querySelectorAll(".hapus").forEach(btn => {
        btn.onclick = async () => {
          await db.collection("berita").doc(btn.dataset.id).delete();
        };
      });
    });
  </script></body>
</html>
